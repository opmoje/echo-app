# ğŸ¤– Instagram Chatbot Demo

Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ±Ğ¾Ñ‚Ğ° Ğ² Instagram Direct Messages Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ĞµĞ¹ echo (Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ‚Ğ¾Ğ³Ğ¾ Ğ¶Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾).

## ğŸ“‹ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- âœ… ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ OAuth 2.0 flow Ğ´Ğ»Ñ Instagram
- âœ… Web-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (Vue.js)
- âœ… Webhook Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- âœ… Echo-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ñ‚ĞµĞ¼ Ğ¶Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼)
- âœ… Backend API Ğ½Ğ° Node.js + Express
- âœ… Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ (Ğ´Ğ»Ñ Ğ´ĞµĞ¼Ğ¾)

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
instaai/
â”œâ”€â”€ backend/              # Node.js backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/      # API endpoints
â”‚   â”‚   â”œâ”€â”€ services/    # Instagram API ĞºĞ»Ğ¸ĞµĞ½Ñ‚
â”‚   â”‚   â””â”€â”€ server.js    # Express ÑĞµÑ€Ğ²ĞµÑ€
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/            # Vue.js SPA
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ App.vue     # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ“¦ Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- Node.js 18+ 
- npm Ğ¸Ğ»Ğ¸ yarn
- ngrok (Ğ´Ğ»Ñ webhook)
- Instagram Business/Creator Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚
- Facebook Page ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ°Ñ Ñ Instagram
- Facebook App Ñ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğ¼Ğ¸ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸ÑĞ¼Ğ¸

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ¨Ğ°Ğ³ 1: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Facebook App

1. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ½Ğ° https://developers.facebook.com/apps/
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (Ñ‚Ğ¸Ğ¿: **Business**)
3. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ **"Instagram"** Ğ¸ **"Webhooks"**
4. Ğ’ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ:
   - **App ID** 
   - **App Secret** (Settings â†’ Basic)

### Ğ¨Ğ°Ğ³ 2: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹

Ğ’ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ **Instagram â†’ Basic Display** Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ:

**OAuth Redirect URIs:**
```
http://localhost:3000/auth/callback
```

**ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ (permissions):**
- `instagram_basic`
- `instagram_manage_messages`
- `pages_manage_metadata`
- `pages_messaging`

### Ğ¨Ğ°Ğ³ 3: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Instagram Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°

1. ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ²Ğ°Ñˆ Instagram Ğ² **Business** Ğ¸Ğ»Ğ¸ **Creator** Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚:
   - ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Instagram â†’ Settings â†’ Account â†’ Switch to Professional Account
   
2. Ğ¡Ğ²ÑĞ¶Ğ¸Ñ‚Ğµ Ñ Facebook Page:
   - Instagram â†’ Settings â†’ Business â†’ Page
   - Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²ÑƒÑ Facebook Page

3. Ğ’ Facebook App Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Instagram Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚:
   - Products â†’ Instagram â†’ Settings
   - Add Instagram Account

### Ğ¨Ğ°Ğ³ 4: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

```bash
# Backend
cd backend
npm install

# Frontend (Ğ² Ğ½Ğ¾Ğ²Ğ¾Ğ¼ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğµ)
cd frontend
npm install
```

### Ğ¨Ğ°Ğ³ 5: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `backend/.env` Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ `.env.example`:

```bash
cd backend
cp .env.example .env
```

ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `backend/.env`:

```env
# Instagram App Configuration
INSTAGRAM_APP_ID=your_facebook_app_id
INSTAGRAM_APP_SECRET=your_facebook_app_secret
INSTAGRAM_REDIRECT_URI=http://localhost:3000/auth/callback

# Server Configuration
PORT=3000
NODE_ENV=development

# Webhook Configuration
WEBHOOK_VERIFY_TOKEN=your_random_secret_token_123

# Frontend URL
FRONTEND_URL=http://localhost:5173
```

> **Ğ’ĞĞ–ĞĞ:** `WEBHOOK_VERIFY_TOKEN` - Ğ»ÑĞ±Ğ°Ñ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸ webhook

### Ğ¨Ğ°Ğ³ 6: Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

**Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» 1 - Backend:**
```bash
cd backend
npm run dev
```

Ğ’Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ:
```
ğŸš€ Instagram Chatbot Backend running on port 3000
```

**Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» 2 - Frontend:**
```bash
cd frontend
npm run dev
```

Ğ’Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ:
```
Local: http://localhost:5173/
```

**Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» 3 - ngrok:**
```bash
ngrok http 3000
```

Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ HTTPS URL (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: `https://abc123.ngrok.io`)

### Ğ¨Ğ°Ğ³ 7: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Webhook

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Facebook App â†’ **Products â†’ Webhooks**
2. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ **Instagram** Ğ² Ğ²Ñ‹Ğ¿Ğ°Ğ´Ğ°ÑÑ‰ĞµĞ¼ ÑĞ¿Ğ¸ÑĞºĞµ
3. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **"Edit Subscription"**
4. Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ:
   - **Callback URL:** `https://kirby-plutonic-stiffly.ngrok-free.dev/webhook`
   - **Verify Token:** Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Ğ²Ğ°ÑˆĞµĞ³Ğ¾ `.env` (WEBHOOK_VERIFY_TOKEN)
5. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸:
   - âœ“ `messages`
6. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **"Verify and Save"**

Ğ•ÑĞ»Ğ¸ Ğ²ÑÑ‘ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾, Ğ²Ñ‹ ÑƒĞ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ âœ… Ñ€ÑĞ´Ğ¾Ğ¼ Ñ webhook URL.

### Ğ¨Ğ°Ğ³ 8: ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€: http://localhost:5173
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **"ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Instagram"**
3. Ğ’Ğ¾Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Facebook/Instagram
4. Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ¸Ñ‚Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
5. Ğ’Ñ‹ Ğ±ÑƒĞ´ĞµÑ‚Ğµ Ğ¿ĞµÑ€ĞµĞ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ñ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

1. ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¹ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ±Ğ¾Ñ‚ Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚ Ğ²Ğ°ÑˆĞµĞ¼Ñƒ Instagram Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ñƒ **Ñ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°**
3. Ğ‘Ğ¾Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ñ‚ Ñ‚ĞµĞ¼ Ğ¶Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ĞµĞ¼
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ² Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğµ backend Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸

## ğŸ“¡ API Endpoints

### Backend (http://localhost:3000)

| Endpoint | Method | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|--------|----------|
| `/` | GET | Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ API |
| `/health` | GET | Health check |
| `/auth/login` | GET | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ URL Ğ´Ğ»Ñ OAuth |
| `/auth/callback` | GET | OAuth callback |
| `/auth/status` | GET | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ |
| `/webhook` | GET | Webhook verification |
| `/webhook` | POST | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ |

## ğŸ”§ Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ´Ğ°

**Backend:**
- `src/server.js` - Express ÑĞµÑ€Ğ²ĞµÑ€ Ğ¸ middleware
- `src/routes/auth.js` - OAuth endpoints
- `src/routes/webhook.js` - Webhook endpoints
- `src/services/instagram.js` - Instagram API ĞºĞ»Ğ¸ĞµĞ½Ñ‚

**Frontend:**
- `src/App.vue` - Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ñ UI
- `src/main.js` - Entry point

### Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Echo Ğ±Ğ¾Ñ‚Ğ°

```javascript
// backend/src/services/instagram.js
async handleWebhook(data) {
  for (const entry of data.entry) {
    for (const messaging of entry.messaging || []) {
      if (messaging.message && !messaging.message.is_echo) {
        const senderId = messaging.sender.id;
        const messageText = messaging.message.text;
        
        // Echo - Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾
        await this.sendMessage(senderId, messageText);
      }
    }
  }
}
```

## ğŸš€ Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

Ğ­Ñ‚Ğ° Ğ´ĞµĞ¼ĞºĞ° Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ ĞºĞ°Ğº Ğ¾ÑĞ½Ğ¾Ğ²Ğ° Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ĞµĞµ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°. Ğ”Ğ»Ñ production Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ:

### Python Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
```python
# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: AI-powered Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹
from openai import OpenAI

def generate_response(user_message):
    client = OpenAI()
    response = client.chat.completions.create(
        model="gpt-4",
        messages=[{"role": "user", "content": user_message}]
    )
    return response.choices[0].message.content
```

### Golang Ğ´Ğ»Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ½Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
```go
// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° message queue
package main

import "github.com/streadway/amqp"

func processMessages() {
    // High-performance message processing
    // Rate limiting
    // Concurrent webhook handling
}
```

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ production

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Instagram  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ webhook
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Node.js   â”‚â”€â”€â”€â”€â”€â–¶â”‚  Message     â”‚
â”‚   Gateway   â”‚      â”‚  Queue       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  (RabbitMQ)  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼             â–¼             â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Python  â”‚  â”‚  Python  â”‚  â”‚   Go     â”‚
       â”‚  Worker  â”‚  â”‚  Worker  â”‚  â”‚  Worker  â”‚
       â”‚  (AI)    â”‚  â”‚  (NLP)   â”‚  â”‚  (Fast)  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚             â”‚             â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  PostgreSQL  â”‚
                     â”‚  + Redis     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ³ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ² Docker Swarm

Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Docker Swarm Ğ¸ Nginx Proxy Manager:

ğŸ“– **[ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Docker Ğ´ĞµĞ¿Ğ»Ğ¾Ñ](DOCKER_DEPLOY.md)**

### ĞšÑ€Ğ°Ñ‚ĞºĞ°Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ:

1. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞµÑ‚ÑŒ:**
```bash
docker network create --driver overlay --attachable shared-network
```

2. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `.env` Ñ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ**

3. **Ğ¡Ğ¾Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹:**
```bash
docker build -t instabot-backend:latest ./backend
docker build --build-arg VITE_BACKEND_URL=https://api.instabot.wbcheap.ru -t instabot-frontend:latest ./frontend
```

4. **Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹:**
```bash
docker stack deploy -c docker-stack.yml instabot
```

5. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Nginx Proxy Manager** Ğ´Ğ»Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ² `instabot.wbcheap.ru` Ğ¸ `api.instabot.wbcheap.ru`

## ğŸš€ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° Render.com

Ğ”Ğ»Ñ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° Render.com ÑĞ»ĞµĞ´ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğ¹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸:

ğŸ“– **[ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ](RENDER_DEPLOY.md)**

### âš ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Facebook OAuth

ĞŸĞ¾ÑĞ»Ğµ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Facebook App:

- ğŸ“˜ **[Ğ”Ğ»Ñ ÑÑ‚Ğ°Ñ€Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ° Facebook](FACEBOOK_OAUTH_SETUP.md)** (Ñ Instagram Basic Display)
- ğŸ†• **[Ğ”Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ° Facebook 2024](FACEBOOK_OAUTH_NEW_INTERFACE.md)** (Ñ "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° API Ğ´Ğ»Ñ Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ² Instagram")

```

2. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Blueprint Ğ½Ğ° Render.com:**
   - Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° https://render.com
   - New â†’ Blueprint â†’ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
   - Render Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ½Ğ°Ğ¹Ğ´ĞµÑ‚ `render.yaml`

3. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ:**
   - `INSTAGRAM_APP_ID`
   - `INSTAGRAM_APP_SECRET`
   - `WEBHOOK_VERIFY_TOKEN`

4. **ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Instagram App Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸:**
   - Redirect URI: `https://Ğ²Ğ°Ñˆ-backend.onrender.com/auth/callback`
   - Webhook URL: `https://Ğ²Ğ°Ñˆ-backend.onrender.com/webhook`

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** ĞĞ° Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾Ğ¼ tier backend "Ğ·Ğ°ÑÑ‹Ğ¿Ğ°ĞµÑ‚" Ğ¿Ğ¾ÑĞ»Ğµ 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚. ĞŸĞµÑ€ĞµĞ´ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ `/health` endpoint Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ "Ñ€Ğ°Ğ·Ğ±ÑƒĞ´Ğ¸Ñ‚ÑŒ" ÑĞµÑ€Ğ²ĞµÑ€.

Ğ¡Ğ¼. [RENDER_DEPLOY.md](RENDER_DEPLOY.md) Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ñ… Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¹ Ğ¸ troubleshooting.

## ğŸ“ Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸

- **Ğ¢Ğ¾ĞºĞµĞ½Ñ‹ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸** - Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞµ Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- Ğ”Ğ»Ñ production Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ‘Ğ” (MongoDB/PostgreSQL)
- Ğ¢Ğ¾ĞºĞµĞ½Ñ‹ Instagram Ğ¸Ğ¼ĞµÑÑ‚ ÑÑ€Ğ¾Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ - Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ refresh Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ environment variables Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²
- Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ rate limiting Ğ´Ğ»Ñ production

## ğŸ› Troubleshooting

### Webhook Ğ½Ğµ Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ
- Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ ngrok Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ Ğ¸ URL Ğ°ĞºÑ‚ÑƒĞ°Ğ»ĞµĞ½
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ‡Ñ‚Ğ¾ WEBHOOK_VERIFY_TOKEN ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ backend

### OAuth Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
- Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ Redirect URI Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ permissions Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹
- Instagram Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Business/Creator

### Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´ÑÑ‚
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ webhook Ğ½Ğ° `messages`
- Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ Ñ‡Ñ‚Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚Ğµ Ñ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ backend Ğ½Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

## ğŸ“š ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸

- [Instagram Messaging API Documentation](https://developers.facebook.com/docs/messenger-platform/instagram)
- [Facebook App Dashboard](https://developers.facebook.com/apps/)
- [ngrok Documentation](https://ngrok.com/docs)
- [Vue.js Guide](https://vuejs.org/guide/)

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT

## ğŸ‘¨â€ğŸ’» ĞĞ²Ñ‚Ğ¾Ñ€

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ ĞºĞ°Ğº demo Ğ´Ğ»Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ Instagram Messaging API

---

**Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ!** ğŸš€
